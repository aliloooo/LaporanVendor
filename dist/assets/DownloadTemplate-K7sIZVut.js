import{j as e}from"./index-FPoq0GoD.js";import{r}from"./vendor-C2YDr15k.js";import{g as C,f as S}from"./adminService-BV-wYqs0.js";import{l as T,f as _,L as D,m as f,b as F,c as L,D as E}from"./ui-hZRiD3mG.js";import"./data-CpkYhZGa.js";import"./toDate-SX-ecmdR.js";const g={excel:{label:"Excel",icon:L,color:"text-green-700",bg:"bg-green-50",border:"border-green-200",badge:"bg-green-100 text-green-700"},word:{label:"Word",icon:F,color:"text-blue-700",bg:"bg-blue-50",border:"border-blue-200",badge:"bg-blue-100 text-blue-700"},pdf:{label:"PDF",icon:f,color:"text-red-700",bg:"bg-red-50",border:"border-red-200",badge:"bg-red-100 text-red-700"}},$=({template:l})=>{const t=g[l.file_type]||g.pdf,x=t.icon,m=()=>{l.file_url?window.open(l.file_url,"_blank"):alert("URL file tidak tersedia.")};return e.jsxs("div",{className:`bg-white rounded-xl border ${t.border} shadow-sm hover:shadow-md transition-shadow p-5 flex flex-col gap-4`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-3 ${t.bg} rounded-xl shrink-0`,children:e.jsx(x,{className:`w-6 h-6 ${t.color}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 leading-snug",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${t.badge}`,children:t.label}),e.jsx("span",{className:"text-xs text-slate-400 px-2 py-0.5 bg-slate-100 rounded-full",children:l.category})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-100 pt-3",children:[e.jsxs("p",{className:"text-xs text-slate-400",children:["Update: ",S(new Date(l.updated_at||l.created_at),"dd MMM yyyy")]}),e.jsxs("button",{onClick:m,className:`flex items-center gap-1.5 px-3 py-1.5 ${t.bg} ${t.color} border ${t.border} rounded-lg text-xs font-medium hover:opacity-80 transition-opacity`,children:[e.jsx(E,{className:"w-3.5 h-3.5"}),"Download"]})]})]})},U=()=>{const[l,t]=r.useState([]),[x,m]=r.useState(!0),[u,b]=r.useState(""),[n,j]=r.useState(""),[d,y]=r.useState("all"),[c,w]=r.useState("all");r.useEffect(()=>{(async()=>{try{t(await C())}catch(a){b(a.message)}finally{m(!1)}})()},[]);const N=["all",...new Set(l.map(s=>s.category))],i=l.filter(s=>{const a=s.name.toLowerCase().includes(n.toLowerCase())||s.category.toLowerCase().includes(n.toLowerCase()),o=d==="all"||s.file_type===d,p=c==="all"||s.category===c;return a&&o&&p}),v={excel:i.filter(s=>s.file_type==="excel"),word:i.filter(s=>s.file_type==="word"),pdf:i.filter(s=>s.file_type==="pdf")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Download Template"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Download template laporan yang tersedia untuk vendor."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(T,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Cari template...",value:n,onChange:s=>j(s.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]}),e.jsxs("select",{value:d,onChange:s=>y(s.target.value),className:"border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"all",children:"Semua Tipe"}),e.jsx("option",{value:"excel",children:"Excel"}),e.jsx("option",{value:"word",children:"Word"}),e.jsx("option",{value:"pdf",children:"PDF"})]}),e.jsx("select",{value:c,onChange:s=>w(s.target.value),className:"border border-slate-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:N.map(s=>e.jsx("option",{value:s,children:s==="all"?"Semua Kategori":s},s))})]}),u&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg flex items-center gap-3 text-sm text-red-700",children:[e.jsx(_,{className:"w-4 h-4 shrink-0"})," ",u]}),x?e.jsx("div",{className:"flex justify-center py-16",children:e.jsx(D,{className:"w-8 h-8 animate-spin text-blue-600"})}):i.length===0?e.jsxs("div",{className:"text-center py-16 text-slate-400",children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:n||d!=="all"||c!=="all"?"Tidak ada template yang sesuai filter.":"Belum ada template tersedia."})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(v).map(([s,a])=>{if(a.length===0)return null;const o=g[s],p=o.icon;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(p,{className:`w-5 h-5 ${o.color}`}),e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:o.label}),e.jsxs("span",{className:"text-sm text-slate-400",children:["(",a.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(h=>e.jsx($,{template:h},h.id))})]},s)})})]})};export{U as default};
