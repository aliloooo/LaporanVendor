import{s as e}from"./index-B9GCynK_.js";const n="templates",u=async()=>{const{data:a,error:t}=await e.from("report_templates").select("*").order("created_at",{ascending:!1});if(t)throw t;return a},w=async({name:a,category:t,file_type:r,file:o})=>{const{data:{user:s}}=await e.auth.getUser(),l=`${`${r}`}/${Date.now()}-${o.name.replace(/[^a-z0-9.]/gi,"_")}`,{error:c}=await e.storage.from(n).upload(l,o);if(c)throw c;const{data:d}=e.storage.from(n).getPublicUrl(l),{data:p,error:i}=await e.from("report_templates").insert([{name:a,category:t,file_type:r,file_url:d.publicUrl,file_path:l,uploaded_by:s.id}]).select().single();if(i)throw i;return p},g=async(a,{name:t,category:r})=>{const{data:o,error:s}=await e.from("report_templates").update({name:t,category:r,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(s)throw s;return o},_=async(a,t)=>{await e.storage.from(n).remove([t]);const{error:r}=await e.from("report_templates").delete().eq("id",a);if(r)throw r};export{w as c,_ as d,u as g,g as u};
